<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ECS EntityBuilder Demo</title>
  <link rel="stylesheet" href="../css/demo-styles.css">
  <style>
    .entity-card {
      background: #1e1e1e;
      border: 1px solid #333;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 12px;
      transition: all 0.3s ease;
    }
    .entity-card:hover {
      border-color: #61dafb;
    }
    .entity-card.selected {
      border-color: #4caf50;
      box-shadow: 0 0 10px rgba(76, 175, 80, 0.3);
    }
    .entity-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    .entity-name {
      font-weight: bold;
      color: #61dafb;
      font-size: 16px;
    }
    .entity-id {
      font-size: 12px;
      color: #888;
    }
    .entity-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-bottom: 8px;
    }
    .tag {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 10px;
      background: #333;
      color: #fff;
    }
    .tag.enemy { background: #f44336; }
    .tag.player { background: #4caf50; }
    .tag.npc { background: #2196f3; }
    .tag.boss { background: #9c27b0; }
    .entity-components {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 8px;
    }
    .component-badge {
      font-size: 12px;
      padding: 4px 8px;
      border-radius: 4px;
      background: #333;
      border: 1px solid #555;
    }
    .component-badge.Position { border-color: #ff9800; }
    .component-badge.Rotation { border-color: #2196f3; }
    .component-badge.Scale { border-color: #4caf50; }
    .component-badge.Health { border-color: #f44336; }
    .component-badge.Active { border-color: #9c27b0; }
    .entity-details {
      font-size: 12px;
      color: #888;
      background: #252525;
      padding: 8px;
      border-radius: 4px;
    }
    .hierarchy-view {
      background: #1e1e1e;
      border: 1px solid #333;
      border-radius: 8px;
      padding: 16px;
      margin-top: 16px;
    }
    .hierarchy-node {
      padding: 4px 8px;
      margin: 2px 0;
      border-radius: 4px;
      cursor: pointer;
    }
    .hierarchy-node:hover {
      background: #333;
    }
    .hierarchy-node.level-0 { margin-left: 0; }
    .hierarchy-node.level-1 { margin-left: 20px; }
    .hierarchy-node.level-2 { margin-left: 40px; }
    .hierarchy-node.level-3 { margin-left: 60px; }
    .builder-preview {
      background: #1a1a2e;
      border: 1px solid #333;
      border-radius: 8px;
      padding: 16px;
      font-family: monospace;
      font-size: 13px;
      white-space: pre-wrap;
      color: #61dafb;
    }
    .code-keyword { color: #c586c0; }
    .code-string { color: #ce9178; }
    .code-number { color: #b5cea8; }
    .code-method { color: #dcdcaa; }
  </style>
</head>
<body>
  <div class="demo-container">
    <header class="demo-header">
      <h1>ğŸ—ï¸ ECS EntityBuilder Demo</h1>
      <p>å±•ç¤º EntityBuilder çš„é“¾å¼ APIã€å†…ç½®ç»„ä»¶å’Œå±‚çº§å…³ç³»ç®¡ç†</p>
      <a href="../index.html" class="back-link">â† è¿”å› Demo åˆ—è¡¨</a>
    </header>

    <div class="demo-content">
      <div class="demo-main">
        <!-- å¿«é€Ÿåˆ›å»º -->
        <div class="control-panel">
          <h3>ğŸš€ å¿«é€Ÿåˆ›å»º</h3>
          <div class="button-group">
            <button onclick="createPlayer()" class="btn btn-success">åˆ›å»ºç©å®¶</button>
            <button onclick="createEnemy()" class="btn btn-danger">åˆ›å»ºæ•Œäºº</button>
            <button onclick="createNPC()" class="btn btn-primary">åˆ›å»º NPC</button>
            <button onclick="createBoss()" class="btn btn-warning">åˆ›å»º Boss</button>
          </div>
        </div>

        <!-- æ‰¹é‡åˆ›å»º -->
        <div class="control-panel">
          <h3>ğŸ“¦ æ‰¹é‡åˆ›å»º</h3>
          <div class="button-group">
            <button onclick="spawnEnemyWave(5)" class="btn btn-outline">ç”Ÿæˆ 5 ä¸ªæ•Œäºº</button>
            <button onclick="spawnEnemyWave(10)" class="btn btn-outline">ç”Ÿæˆ 10 ä¸ªæ•Œäºº</button>
            <button onclick="createHierarchy()" class="btn btn-outline">åˆ›å»ºå±‚çº§ç»“æ„</button>
          </div>
        </div>

        <!-- æŸ¥æ‰¾æ“ä½œ -->
        <div class="control-panel">
          <h3>ğŸ” æŸ¥æ‰¾æ“ä½œ</h3>
          <div class="button-group">
            <button onclick="findByName('Player')" class="btn btn-outline">æŸ¥æ‰¾ Player</button>
            <button onclick="findByTag('enemy')" class="btn btn-outline">æŸ¥æ‰¾æ‰€æœ‰æ•Œäºº</button>
            <button onclick="findByTag('boss')" class="btn btn-outline">æŸ¥æ‰¾ Boss</button>
            <button onclick="clearAll()" class="btn btn-danger">æ¸…ç©ºæ‰€æœ‰</button>
          </div>
        </div>

        <!-- å®ä½“åˆ—è¡¨ -->
        <h3>ğŸ“‹ å®ä½“åˆ—è¡¨ (<span id="entityCount">0</span>)</h3>
        <div id="entityList"></div>

        <!-- å±‚çº§è§†å›¾ -->
        <div class="hierarchy-view">
          <h3>ğŸŒ³ å±‚çº§è§†å›¾</h3>
          <div id="hierarchyView"></div>
        </div>
      </div>

      <div class="demo-sidebar">
        <div class="info-panel">
          <h3>ğŸ“– EntityBuilder API</h3>
          <p>EntityBuilder æä¾›æµç•…çš„é“¾å¼ API æ¥åˆ›å»ºå®ä½“ï¼š</p>
          <div class="builder-preview">
<span class="code-keyword">const</span> entity = world
  .<span class="code-method">spawn</span>(<span class="code-string">'Player'</span>)
  .<span class="code-method">position</span>(<span class="code-number">10</span>, <span class="code-number">0</span>, <span class="code-number">0</span>)
  .<span class="code-method">rotation</span>(<span class="code-number">0</span>, <span class="code-number">0</span>, <span class="code-number">0</span>, <span class="code-number">1</span>)
  .<span class="code-method">scale</span>(<span class="code-number">1</span>)
  .<span class="code-method">tag</span>(<span class="code-string">'player'</span>)
  .<span class="code-method">add</span>(Health, { current: <span class="code-number">100</span> })
  .<span class="code-method">build</span>();
          </div>
        </div>

        <div class="info-panel">
          <h3>ğŸ¯ å†…ç½®ç»„ä»¶</h3>
          <ul>
            <li><strong>Name</strong> - å®ä½“åç§°</li>
            <li><strong>Tag</strong> - æ ‡ç­¾é›†åˆ</li>
            <li><strong>Position</strong> - 3D ä½ç½®</li>
            <li><strong>Rotation</strong> - å››å…ƒæ•°æ—‹è½¬</li>
            <li><strong>Scale</strong> - 3D ç¼©æ”¾</li>
            <li><strong>Parent/Children</strong> - å±‚çº§å…³ç³»</li>
            <li><strong>Active</strong> - æ¿€æ´»çŠ¶æ€</li>
          </ul>
        </div>

        <div class="log-panel">
          <h3>ğŸ“ æ—¥å¿—</h3>
          <div id="logArea" class="log-area"></div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="../src/entity-builder.ts"></script>
</body>
</html>