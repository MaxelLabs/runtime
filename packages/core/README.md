# Maxellabs 3D Engine - æ ¸å¿ƒåŒ… (`@maxellabs/core`)

## æ¦‚è¿°

`@maxellabs/core` æ˜¯ Maxellabs 3D Engine çš„æ ¸å¿ƒå±‚ï¼Œä¸ºæ•´ä¸ªå¼•æ“ç”Ÿæ€ç³»ç»Ÿæä¾›åŸºç¡€æ¶æ„å’Œæ ¸å¿ƒåŠŸèƒ½ã€‚å®ƒæ˜¯è¿æ¥è®¾è®¡ã€åŠ¨æ•ˆã€å›¾è¡¨ã€æ¸²æŸ“å¼•æ“çš„å…³é”®çº½å¸¦ï¼Œæä¾›äº†ä¸€ä¸ªå®Œæ•´çš„ã€å¯æ‰©å±•çš„ã€é«˜æ€§èƒ½çš„ 3D åº”ç”¨ç¨‹åºå¼€å‘æ¡†æ¶ã€‚

## ğŸ¯ è®¾è®¡ç›®æ ‡

- **ç»Ÿä¸€æ¶æ„**: ä¸ºä»è®¾è®¡å·¥å…·åˆ°ç”Ÿäº§ç¯å¢ƒçš„å®Œæ•´å·¥ä½œæµç¨‹æä¾›ç»Ÿä¸€çš„æŠ€æœ¯æ ˆ
- **API æ— å…³**: é€šè¿‡RHIå±‚æŠ½è±¡ä¸åŒçš„å›¾å½¢APIï¼ˆWebGLã€WebGL2ã€WebGPUç­‰ï¼‰
- **é«˜æ€§èƒ½**: ä¼˜åŒ–çš„æ¸²æŸ“ç®¡çº¿å’Œèµ„æºç®¡ç†ï¼Œæ”¯æŒå¤æ‚çš„3Dåœºæ™¯
- **å¯æ‰©å±•**: åŸºäºç»„ä»¶çš„æ¶æ„ï¼Œæ”¯æŒè‡ªå®šä¹‰ç»„ä»¶å’Œç³»ç»Ÿ
- **è·¨å¹³å°**: æ”¯æŒWebã€ç§»åŠ¨ç«¯ã€æ¡Œé¢ç«¯ç­‰å¤šå¹³å°éƒ¨ç½²

## ğŸ—ï¸ æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Maxellabs 3D Engine                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è®¾è®¡å·¥å…·å±‚  â”‚  åŠ¨æ•ˆå·¥å…·å±‚  â”‚  å›¾è¡¨å·¥å…·å±‚  â”‚  åº”ç”¨å¼€å‘å±‚    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    @maxellabs/core                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   Engine    â”‚ â”‚   Scene     â”‚ â”‚  Resource   â”‚            â”‚
â”‚  â”‚   å¼•æ“æ ¸å¿ƒ   â”‚ â”‚   åœºæ™¯ç®¡ç†   â”‚ â”‚   èµ„æºç®¡ç†   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  Renderer   â”‚ â”‚   Input     â”‚ â”‚  Material   â”‚            â”‚
â”‚  â”‚   æ¸²æŸ“ç³»ç»Ÿ   â”‚ â”‚   è¾“å…¥ç³»ç»Ÿ   â”‚ â”‚   æè´¨ç³»ç»Ÿ   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     RHI Interface                          â”‚
â”‚              (Rendering Hardware Interface)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       WebGL        â”‚      WebGL2       â”‚      WebGPU       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ æ ¸å¿ƒæ¨¡å—

### ğŸ® Engine (`engine.ts`)
**å¼•æ“æ ¸å¿ƒæ§åˆ¶å™¨**

è´Ÿè´£æ•´ä¸ªå¼•æ“çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€ä¸»å¾ªç¯æ§åˆ¶å’Œç³»ç»Ÿåè°ƒã€‚

**ä¸»è¦åŠŸèƒ½**:
- å¼•æ“åˆå§‹åŒ–å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†
- ä¸»å¾ªç¯æ§åˆ¶ï¼ˆUpdate-Renderå¾ªç¯ï¼‰
- ç³»ç»Ÿé—´çš„åè°ƒå’Œé€šä¿¡
- æ€§èƒ½ç›‘æ§å’Œè°ƒè¯•æ”¯æŒ
- IOCå®¹å™¨ç®¡ç†

**å…³é”®ç‰¹æ€§**:
- ç›®æ ‡å¸§ç‡æ§åˆ¶
- å¼‚æ­¥åˆå§‹åŒ–
- äº‹ä»¶é©±åŠ¨æ¶æ„
- çŠ¶æ€ç®¡ç†

```typescript
import { Engine, EngineOptions } from '@maxellabs/core';

const engine = new Engine({
  targetFrameRate: 60,
  autoStart: true,
  enablePhysics: true,
  debug: true
});

await engine.initialize();
engine.start();
```

### ğŸ­ Scene (`scene/`)
**åœºæ™¯å›¾å’Œå¯¹è±¡ç®¡ç†**

æä¾›åŸºäºå±‚çº§ç»“æ„çš„åœºæ™¯ç®¡ç†å’Œå®ä½“-ç»„ä»¶-ç³»ç»Ÿï¼ˆECSï¼‰æ¶æ„ã€‚

**ä¸»è¦åŠŸèƒ½**:
- åœºæ™¯å›¾ç®¡ç†
- æ¸¸æˆå¯¹è±¡ç”Ÿå‘½å‘¨æœŸ
- ç»„ä»¶ç³»ç»Ÿ
- å˜æ¢å±‚çº§
- åœºæ™¯åºåˆ—åŒ–/ååºåˆ—åŒ–

**ç›®å½•ç»“æ„**:
```
scene/
â”œâ”€â”€ Scene.ts              # åœºæ™¯æ ¹å®¹å™¨
â”œâ”€â”€ GameObject.ts         # æ¸¸æˆå¯¹è±¡
â”œâ”€â”€ Component.ts          # ç»„ä»¶åŸºç±»
â”œâ”€â”€ scene-manager.ts      # åœºæ™¯ç®¡ç†å™¨
â””â”€â”€ components/           # å†…ç½®ç»„ä»¶
    â”œâ”€â”€ MeshRenderer.ts   # ç½‘æ ¼æ¸²æŸ“ç»„ä»¶
    â”œâ”€â”€ Camera.ts         # ç›¸æœºç»„ä»¶
    â”œâ”€â”€ Light.ts          # å…‰æºç»„ä»¶
    â””â”€â”€ Transform.ts      # å˜æ¢ç»„ä»¶
```

### ğŸ¨ Renderer (`renderer/`)
**æ¸²æŸ“ç®¡çº¿å’Œç»˜åˆ¶ç³»ç»Ÿ**

ç®¡ç†æ•´ä¸ªæ¸²æŸ“æµç¨‹ï¼Œä»åœºæ™¯æ•°æ®åˆ°æœ€ç»ˆç”»é¢è¾“å‡ºã€‚

**ä¸»è¦åŠŸèƒ½**:
- æ¸²æŸ“ç®¡çº¿ç®¡ç†
- æ¸²æŸ“é˜Ÿåˆ—æ’åº
- è§†é”¥å‰”é™¤å’Œä¼˜åŒ–
- æ‰¹å¤„ç†å’Œå®ä¾‹åŒ–
- åå¤„ç†æ•ˆæœ

**ç›®å½•ç»“æ„**:
```
renderer/
â”œâ”€â”€ Renderer.ts           # æ¸²æŸ“å™¨ä¸»ç±»
â”œâ”€â”€ RenderPipeline.ts     # æ¸²æŸ“ç®¡çº¿æŠ½è±¡
â”œâ”€â”€ ForwardRenderer.ts    # å‰å‘æ¸²æŸ“ç®¡çº¿
â”œâ”€â”€ RenderQueue.ts        # æ¸²æŸ“é˜Ÿåˆ—
â”œâ”€â”€ RenderElement.ts      # æ¸²æŸ“å…ƒç´ 
â”œâ”€â”€ render-context.ts     # æ¸²æŸ“ä¸Šä¸‹æ–‡
â””â”€â”€ passes/               # æ¸²æŸ“é€šé“
    â”œâ”€â”€ DepthPass.ts      # æ·±åº¦é€šé“
    â”œâ”€â”€ ShadowPass.ts     # é˜´å½±é€šé“
    â””â”€â”€ PostProcessPass.ts # åå¤„ç†é€šé“
```

### ğŸ¯ Resource (`resource/`)
**èµ„æºç®¡ç†å’Œç¼“å­˜**

ç»Ÿä¸€ç®¡ç†çº¹ç†ã€æ¨¡å‹ã€æè´¨ã€ç€è‰²å™¨ç­‰å„ç±»èµ„æºã€‚

**ä¸»è¦åŠŸèƒ½**:
- å¼‚æ­¥èµ„æºåŠ è½½
- èµ„æºç¼“å­˜å’Œé‡ç”¨
- èµ„æºç”Ÿå‘½å‘¨æœŸç®¡ç†
- å†…å­˜ä¼˜åŒ–
- èµ„æºçƒ­é‡è½½

**ç›®å½•ç»“æ„**:
```
resource/
â”œâ”€â”€ resource-manager.ts   # èµ„æºç®¡ç†å™¨
â”œâ”€â”€ Resource.ts           # èµ„æºåŸºç±»
â”œâ”€â”€ ResourceLoader.ts     # èµ„æºåŠ è½½å™¨
â”œâ”€â”€ ResourceCache.ts      # èµ„æºç¼“å­˜
â””â”€â”€ loaders/              # å„ç±»åŠ è½½å™¨
    â”œâ”€â”€ TextureLoader.ts  # çº¹ç†åŠ è½½å™¨
    â”œâ”€â”€ ModelLoader.ts    # æ¨¡å‹åŠ è½½å™¨
    â””â”€â”€ ShaderLoader.ts   # ç€è‰²å™¨åŠ è½½å™¨
```

### ğŸ§Š Geometry (`geometry/`)
**å‡ ä½•ä½“å’Œç½‘æ ¼ç®¡ç†**

æä¾›å„ç§å‡ ä½•ä½“çš„åˆ›å»ºã€æ“ä½œå’Œä¼˜åŒ–åŠŸèƒ½ã€‚

**ä¸»è¦åŠŸèƒ½**:
- åŸºç¡€å‡ ä½•ä½“ç”Ÿæˆ
- ç½‘æ ¼æ•°æ®ç®¡ç†
- å‡ ä½•ä½“å˜æ¢
- LODï¼ˆç»†èŠ‚å±‚æ¬¡ï¼‰æ”¯æŒ
- å‡ ä½•ä½“ä¼˜åŒ–

**ç›®å½•ç»“æ„**:
```
geometry/
â”œâ”€â”€ Geometry.ts           # å‡ ä½•ä½“åŸºç±»
â”œâ”€â”€ Mesh.ts               # ç½‘æ ¼æ•°æ®
â”œâ”€â”€ primitives/           # åŸºç¡€å‡ ä½•ä½“
â”‚   â”œâ”€â”€ BoxGeometry.ts    # ç«‹æ–¹ä½“
â”‚   â”œâ”€â”€ SphereGeometry.ts # çƒä½“
â”‚   â”œâ”€â”€ PlaneGeometry.ts  # å¹³é¢
â”‚   â””â”€â”€ CylinderGeometry.ts # åœ†æŸ±ä½“
â””â”€â”€ modifiers/            # å‡ ä½•ä½“ä¿®æ”¹å™¨
    â”œâ”€â”€ SubdivisionModifier.ts # ç»†åˆ†
    â””â”€â”€ SimplificationModifier.ts # ç®€åŒ–
```

### ğŸ¨ Material (`material/`)
**æè´¨å’Œç€è‰²å™¨ç³»ç»Ÿ**

ç®¡ç†æè´¨å±æ€§ã€ç€è‰²å™¨ç¨‹åºå’Œæ¸²æŸ“çŠ¶æ€ã€‚

**ä¸»è¦åŠŸèƒ½**:
- æè´¨å±æ€§ç®¡ç†
- ç€è‰²å™¨å‚æ•°ç»‘å®š
- æ¸²æŸ“çŠ¶æ€æ§åˆ¶
- æè´¨å˜ä½“ç³»ç»Ÿ
- PBRæè´¨æ”¯æŒ

**ç›®å½•ç»“æ„**:
```
material/
â”œâ”€â”€ Material.ts           # æè´¨åŸºç±»
â”œâ”€â”€ MaterialProperty.ts   # æè´¨å±æ€§
â”œâ”€â”€ MaterialVariant.ts    # æè´¨å˜ä½“
â””â”€â”€ materials/            # å†…ç½®æè´¨
    â”œâ”€â”€ StandardMaterial.ts # æ ‡å‡†æè´¨
    â”œâ”€â”€ PBRMaterial.ts    # PBRæè´¨
    â””â”€â”€ UnlitMaterial.ts  # æ— å…‰ç…§æè´¨
```

### ğŸ•¹ï¸ Input (`input/`)
**è¾“å…¥å¤„ç†å’Œäº‹ä»¶ç³»ç»Ÿ**

å¤„ç†é”®ç›˜ã€é¼ æ ‡ã€è§¦æ‘¸å’Œå…¶ä»–è¾“å…¥è®¾å¤‡çš„äº¤äº’ã€‚

**ä¸»è¦åŠŸèƒ½**:
- å¤šè®¾å¤‡è¾“å…¥æ”¯æŒ
- è¾“å…¥äº‹ä»¶å¤„ç†
- æ‰‹åŠ¿è¯†åˆ«
- è¾“å…¥æ˜ å°„å’Œç»‘å®š

**ç›®å½•ç»“æ„**:
```
input/
â”œâ”€â”€ InputManager.ts       # è¾“å…¥ç®¡ç†å™¨
â”œâ”€â”€ enums/                # è¾“å…¥æšä¸¾
â”œâ”€â”€ interface/            # è¾“å…¥æ¥å£
â”œâ”€â”€ keyboard/             # é”®ç›˜è¾“å…¥
â”œâ”€â”€ pointer/              # æŒ‡é’ˆè¾“å…¥
â””â”€â”€ wheel/                # æ»šè½®è¾“å…¥
```

### ğŸ“· Camera (`camera/`)
**ç›¸æœºå’Œè§†å£ç®¡ç†**

ç®¡ç†3Dåœºæ™¯çš„è§‚å¯Ÿè§†è§’å’ŒæŠ•å½±ã€‚

**ä¸»è¦åŠŸèƒ½**:
- é€è§†/æ­£äº¤æŠ•å½±
- è§†é”¥å‰”é™¤
- ç›¸æœºæ§åˆ¶å™¨
- å¤šç›¸æœºæ”¯æŒ

### ğŸ’¡ Light (`light/`)
**å…‰ç…§ç³»ç»Ÿ**

æä¾›å„ç§å…‰æºç±»å‹å’Œå…‰ç…§è®¡ç®—ã€‚

**ä¸»è¦åŠŸèƒ½**:
- å¤šç§å…‰æºç±»å‹
- å®æ—¶é˜´å½±
- å…‰ç…§çƒ˜ç„™
- ç¯å¢ƒå…‰ç…§

### ğŸ¨ Texture (`texture/`)
**çº¹ç†ç®¡ç†**

å¤„ç†2Dçº¹ç†ã€ç«‹æ–¹ä½“è´´å›¾å’Œæ¸²æŸ“ç›®æ ‡ã€‚

**ä¸»è¦åŠŸèƒ½**:
- å¤šç§çº¹ç†æ ¼å¼
- çº¹ç†å‹ç¼©
- Mipmapç”Ÿæˆ
- æ¸²æŸ“åˆ°çº¹ç†

### ğŸ”§ Shader (`shader/`)
**ç€è‰²å™¨ç®¡ç†**

ç®¡ç†é¡¶ç‚¹ã€ç‰‡æ®µå’Œè®¡ç®—ç€è‰²å™¨ã€‚

**ä¸»è¦åŠŸèƒ½**:
- ç€è‰²å™¨ç¼–è¯‘
- å‚æ•°ç»‘å®š
- å˜ä½“ç®¡ç†
- çƒ­é‡è½½

### ğŸ“‹ Serialization (`serialization/`)
**åºåˆ—åŒ–ç³»ç»Ÿ**

æ”¯æŒåœºæ™¯ã€å¯¹è±¡å’Œèµ„æºçš„åºåˆ—åŒ–ã€‚

**ä¸»è¦åŠŸèƒ½**:
- JSONåºåˆ—åŒ–
- äºŒè¿›åˆ¶åºåˆ—åŒ–
- é¢„åˆ¶ä»¶ç³»ç»Ÿ
- ç‰ˆæœ¬å…¼å®¹

### ğŸ—ï¸ Base (`base/`)
**åŸºç¡€æ¡†æ¶**

æä¾›å¼•æ“çš„åŸºç¡€è®¾æ–½å’Œå·¥å…·ç±»ã€‚

**ä¸»è¦åŠŸèƒ½**:
- äº‹ä»¶ç³»ç»Ÿ
- å¯¹è±¡æ± 
- IOCå®¹å™¨
- æ•°å­¦å·¥å…·

**ç›®å½•ç»“æ„**:
```
base/
â”œâ”€â”€ event-dispatcher.ts   # äº‹ä»¶åˆ†å‘å™¨
â”œâ”€â”€ event.ts              # äº‹ä»¶å®šä¹‰
â”œâ”€â”€ max-object.ts         # åŸºç¡€å¯¹è±¡
â”œâ”€â”€ component.ts          # ç»„ä»¶åŸºç±»
â”œâ”€â”€ entity.ts             # å®ä½“åŸºç±»
â”œâ”€â”€ transform.ts          # å˜æ¢ç»„ä»¶
â”œâ”€â”€ time.ts               # æ—¶é—´ç®¡ç†
â”œâ”€â”€ IOC.ts                # æ§åˆ¶åè½¬å®¹å™¨
â”œâ”€â”€ object-pool.ts        # å¯¹è±¡æ± 
â”œâ”€â”€ object-pool-manager.ts # å¯¹è±¡æ± ç®¡ç†å™¨
â”œâ”€â”€ refer-resource.ts     # èµ„æºå¼•ç”¨
â””â”€â”€ canvas.ts             # ç”»å¸ƒç®¡ç†
```

### ğŸ”Œ Interface (`interface/`)
**RHIæ¥å£å±‚**

å®šä¹‰ä¸åº•å±‚å›¾å½¢APIçš„æŠ½è±¡æ¥å£ã€‚

**ä¸»è¦åŠŸèƒ½**:
- å›¾å½¢APIæŠ½è±¡
- è®¾å¤‡ç®¡ç†
- èµ„æºåˆ›å»º
- æ¸²æŸ“å‘½ä»¤

**ç›®å½•ç»“æ„**:
```
interface/
â””â”€â”€ rhi/                  # æ¸²æŸ“ç¡¬ä»¶æ¥å£
    â”œâ”€â”€ device.ts         # è®¾å¤‡æŠ½è±¡
    â”œâ”€â”€ pipeline.ts       # æ¸²æŸ“ç®¡çº¿
    â”œâ”€â”€ bindings.ts       # èµ„æºç»‘å®š
    â”œâ”€â”€ types/            # ç±»å‹å®šä¹‰
    â”œâ”€â”€ resources/        # èµ„æºæ¥å£
    â””â”€â”€ passes/           # æ¸²æŸ“é€šé“
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
npm install @maxellabs/core
# æˆ–
pnpm add @maxellabs/core
```

### åŸºç¡€ä½¿ç”¨

```typescript
import { Engine, Scene, GameObject, MeshRenderer, BoxGeometry, StandardMaterial } from '@maxellabs/core';

// åˆ›å»ºå¼•æ“
const engine = new Engine({
  targetFrameRate: 60,
  autoStart: true,
  debug: true
});

// åˆå§‹åŒ–å¼•æ“
await engine.initialize();

// åˆ›å»ºåœºæ™¯
const scene = engine.createScene('MainScene');

// åˆ›å»ºæ¸¸æˆå¯¹è±¡
const cubeObject = scene.createGameObject('Cube');

// æ·»åŠ ç½‘æ ¼æ¸²æŸ“å™¨ç»„ä»¶
const meshRenderer = cubeObject.addComponent(MeshRenderer);
meshRenderer.setGeometry(new BoxGeometry(1, 1, 1));
meshRenderer.setMaterial(new StandardMaterial());

// è®¾ç½®ä½ç½®
cubeObject.transform.setPosition(0, 0, 0);

// åˆ›å»ºç›¸æœº
const cameraObject = scene.createGameObject('Camera');
const camera = cameraObject.addComponent(Camera);
camera.setFieldOfView(60);
cameraObject.transform.setPosition(0, 0, 5);

// åŠ è½½åœºæ™¯
engine.loadScene(scene);

// å¯åŠ¨å¼•æ“
engine.start();
```

### é«˜çº§ä½¿ç”¨ç¤ºä¾‹

#### èµ„æºç®¡ç†
```typescript
import { ResourceManager } from '@maxellabs/core';

const resourceManager = engine.getResourceManager();

// åŠ è½½çº¹ç†
const texture = await resourceManager.load<Texture2D>('/textures/diffuse.jpg');

// åŠ è½½æ¨¡å‹
const model = await resourceManager.load<Model>('/models/character.gltf');

// åˆ›å»ºæè´¨
const material = new PBRMaterial();
material.setTexture('albedo', texture);
material.setFloat('metallic', 0.0);
material.setFloat('roughness', 0.5);
```

#### è¾“å…¥å¤„ç†
```typescript
import { InputManager, PointerEventType } from '@maxellabs/core';

const inputManager = engine.getInputManager();

// ç›‘å¬æŒ‡é’ˆäº‹ä»¶
inputManager.on(PointerEventType.Down, (event) => {
  console.log('Pointer down at:', event.position);
});

// ç›‘å¬é”®ç›˜äº‹ä»¶
inputManager.on('keydown', (event) => {
  if (event.key === 'Space') {
    // å¤„ç†ç©ºæ ¼é”®æŒ‰ä¸‹
  }
});
```

#### è‡ªå®šä¹‰ç»„ä»¶
```typescript
import { Component } from '@maxellabs/core';

export class RotationComponent extends Component {
  private speed: number = 1.0;

  setRotationSpeed(speed: number): void {
    this.speed = speed;
  }

  onUpdate(deltaTime: number): void {
    const rotation = this.gameObject.transform.rotation;
    rotation.y += this.speed * deltaTime;
    this.gameObject.transform.setRotation(rotation);
  }
}

// ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶
const rotationComponent = cubeObject.addComponent(RotationComponent);
rotationComponent.setRotationSpeed(2.0);
```

## ğŸ”§ é…ç½®é€‰é¡¹

### å¼•æ“é…ç½®
```typescript
interface EngineOptions {
  /** ç›®æ ‡å¸§ç‡ */
  targetFrameRate?: number;
  /** æ˜¯å¦è‡ªåŠ¨å¯åŠ¨å¼•æ“ */
  autoStart?: boolean;
  /** æ˜¯å¦å¯ç”¨ç‰©ç†ç³»ç»Ÿ */
  enablePhysics?: boolean;
  /** æ˜¯å¦å¯ç”¨éŸ³é¢‘ç³»ç»Ÿ */
  enableAudio?: boolean;
  /** æ˜¯å¦å¯ç”¨è°ƒè¯•æ¨¡å¼ */
  debug?: boolean;
  /** æ¸²æŸ“å™¨é…ç½® */
  renderer?: RendererOptions;
}
```

### æ¸²æŸ“å™¨é…ç½®
```typescript
interface RendererOptions {
  /** ç”»å¸ƒå…ƒç´ æˆ–é€‰æ‹©å™¨ */
  canvas?: HTMLCanvasElement | string;
  /** æŠ—é”¯é½¿ */
  antialias?: boolean;
  /** èƒŒæ™¯è‰² */
  backgroundColor?: Color;
  /** æ˜¯å¦é€æ˜ */
  alpha?: boolean;
  /** æ·±åº¦ç¼“å†² */
  depth?: boolean;
  /** æ¨¡æ¿ç¼“å†² */
  stencil?: boolean;
}
```

## ğŸ¯ ä¸å…¶ä»–åŒ…çš„å…³ç³»

### ä¾èµ–å…³ç³»
- **`@maxellabs/math`**: æ•°å­¦åº“ï¼Œæä¾›å‘é‡ã€çŸ©é˜µã€å››å…ƒæ•°ç­‰æ•°å­¦è¿ç®—
- **`@maxellabs/specification`**: è§„èŒƒåº“ï¼Œæä¾›ç±»å‹å®šä¹‰å’Œæ¥å£è§„èŒƒ

### è¢«ä¾èµ–å…³ç³»
- **`@maxellabs/engine`**: å¼•æ“åŒ…ï¼ŒåŸºäºcoreåŒ…æ„å»ºå®Œæ•´çš„å¼•æ“
- **`@maxellabs/rhi`**: RHIå®ç°åŒ…ï¼Œå®ç°å…·ä½“çš„å›¾å½¢API
- **è®¾è®¡å·¥å…·**: åŸºäºcoreåŒ…çš„ç»„ä»¶ç³»ç»Ÿæ„å»ºè®¾è®¡å·¥å…·
- **åŠ¨æ•ˆå·¥å…·**: ä½¿ç”¨coreåŒ…çš„åŠ¨ç”»å’Œæ—¶é—´ç³»ç»Ÿ
- **å›¾è¡¨å·¥å…·**: åˆ©ç”¨coreåŒ…çš„æ¸²æŸ“èƒ½åŠ›ç»˜åˆ¶å›¾è¡¨

## ğŸ† æ€§èƒ½ç‰¹æ€§

### æ¸²æŸ“ä¼˜åŒ–
- **æ‰¹å¤„ç†æ¸²æŸ“**: è‡ªåŠ¨åˆå¹¶ç›¸åŒæè´¨çš„ç»˜åˆ¶è°ƒç”¨
- **è§†é”¥å‰”é™¤**: GPUåŠ é€Ÿçš„è§†é”¥å‰”é™¤ç®—æ³•
- **LODç³»ç»Ÿ**: è‡ªåŠ¨ç»†èŠ‚å±‚æ¬¡ç®¡ç†
- **å®ä¾‹åŒ–æ¸²æŸ“**: é«˜æ•ˆçš„å¤§é‡ç›¸ä¼¼å¯¹è±¡æ¸²æŸ“

### å†…å­˜ç®¡ç†
- **å¯¹è±¡æ± **: å‡å°‘åƒåœ¾å›æ”¶å‹åŠ›
- **èµ„æºç¼“å­˜**: æ™ºèƒ½çš„èµ„æºå¤ç”¨æœºåˆ¶
- **æ‡’åŠ è½½**: æŒ‰éœ€åŠ è½½èµ„æº
- **å†…å­˜ç›‘æ§**: å®æ—¶å†…å­˜ä½¿ç”¨ç»Ÿè®¡

### å¼‚æ­¥å¤„ç†
- **éé˜»å¡åŠ è½½**: å¼‚æ­¥èµ„æºåŠ è½½ä¸é˜»å¡ä¸»çº¿ç¨‹
- **å¹¶è¡Œå¤„ç†**: å¤šçº¿ç¨‹ä»»åŠ¡è°ƒåº¦
- **å¸§é¢„ç®—**: æ™ºèƒ½çš„å¸§æ—¶é—´åˆ†é…

## ğŸ§ª æµ‹è¯•å’Œè°ƒè¯•

### å•å…ƒæµ‹è¯•
```bash
# è¿è¡Œæµ‹è¯•
pnpm test

# è§‚å¯Ÿæ¨¡å¼
pnpm test:watch

# è¦†ç›–ç‡æŠ¥å‘Š
pnpm test:coverage
```

### è°ƒè¯•åŠŸèƒ½
- **æ€§èƒ½åˆ†æå™¨**: å†…ç½®çš„æ€§èƒ½ç›‘æ§å·¥å…·
- **æ¸²æŸ“è°ƒè¯•**: å¯è§†åŒ–æ¸²æŸ“ç®¡çº¿çŠ¶æ€
- **å†…å­˜åˆ†æ**: å®æ—¶å†…å­˜ä½¿ç”¨ç›‘æ§
- **æ—¥å¿—ç³»ç»Ÿ**: åˆ†çº§æ—¥å¿—å’Œè¿‡æ»¤

## ğŸ“š æœ€ä½³å®è·µ

### ç»„ä»¶è®¾è®¡
- ä¿æŒç»„ä»¶å•ä¸€èŒè´£
- é¿å…ç»„ä»¶é—´çš„å¼ºè€¦åˆ
- ä½¿ç”¨äº‹ä»¶ç³»ç»Ÿè¿›è¡Œé€šä¿¡

### æ€§èƒ½ä¼˜åŒ–
- åˆç†ä½¿ç”¨å¯¹è±¡æ± 
- é¿å…é¢‘ç¹çš„èµ„æºåŠ è½½
- ä¼˜åŒ–æ¸²æŸ“çŠ¶æ€åˆ‡æ¢

### å†…å­˜ç®¡ç†
- åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„èµ„æº
- ä½¿ç”¨å¼±å¼•ç”¨é¿å…å¾ªç¯å¼•ç”¨
- ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ

## ğŸ”® æœªæ¥è§„åˆ’

### çŸ­æœŸç›®æ ‡
- [ ] WebGPUæ”¯æŒ
- [ ] ç‰©ç†å¼•æ“é›†æˆ
- [ ] éŸ³é¢‘ç³»ç»Ÿå®Œå–„
- [ ] æ€§èƒ½åˆ†æå·¥å…·

### é•¿æœŸç›®æ ‡
- [ ] ç§»åŠ¨ç«¯ä¼˜åŒ–
- [ ] VR/ARæ”¯æŒ
- [ ] äº‘æ¸²æŸ“æ”¯æŒ
- [ ] AIè¾…åŠ©å¼€å‘

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [RHIæ¥å£æ–‡æ¡£](../rhi/README.md)
- [è§„èŒƒåŒ…æ–‡æ¡£](../specification/README.md)
- [æ•°å­¦åº“æ–‡æ¡£](../math/README.md)
- [å¼•æ“åŒ…æ–‡æ¡£](../engine/README.md)

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼è¯·æŸ¥çœ‹ [CONTRIBUTING.md](../../CONTRIBUTING.md) äº†è§£å¦‚ä½•å‚ä¸é¡¹ç›®å¼€å‘ã€‚

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](../../LICENSE) æ–‡ä»¶ã€‚

---

**Maxellabs 3D Engine** - è®©3Då¼€å‘æ›´ç®€å•ã€æ›´é«˜æ•ˆã€æ›´æœ‰è¶£ï¼
